import{g as v}from "./getDate-a6a896d2.js";import{_ as x,a as k,m as b,d as a,e as s,t as r,g as c,F as m,q as h,k as u,x as I,w as f,f as g,j as L,b as p,o as i}from "./index-81817b2a.js";import{u as A}from "./articleStore-89776960.js";const{VITE_APP_URL:V,VITE_APP_PATH:E}={BASE_URL:"/998rrr/",MODE:"production",DEV:!1,PROD:!0},P={data(){return{currentIndex:0,article:{},randomArticles:[],isLoading:!1,fullPage:!1}},mixins:[v],methods:{...k(A,["get10Articles","getStoredAllArticles","handleArticles"]),findIndex(){this.currentIndex=this.storedAllArticles.findIndex(e=>e.id===this.article.id)},async getArticle(){this.isLoading=!0;const{id:e}=this.$route.params;try{const l=`${V}/api/${E}/article/${e}`,n=await this.$http.get(l);this.article=n.data.article,this.findIndex()}catch(l){console.error("Error fetching article:",l)}this.isLoading=!1},getRandomArticles(){const e=[];for(; e.length<5;){const l=Math.floor(Math.random()*this.storedAllArticles.length);e.includes(l)||e.push(l)}this.randomArticles=e.map(l=>this.storedAllArticles[l])}},computed:{...b(A,["articles","storedAllArticles"]),allTags(){const e={};return this.storedAllArticles.forEach(n=>{n.tag.forEach(d=>{e[d]?e[d]++:e[d]=1})}),Object.keys(e).sort((n, d)=>e[d]-e[n]).slice(0,20)}},watch:{"$route.params":{immediate:!0,async handler(){this.$route.params.id&&this.getArticle()}}},async mounted(){await this.getArticle(),await this.handleArticles(),this.getRandomArticles()}},T={class:"container py-10 py-md-20"},R={class:"row"},S={class:"col-md-8"},B={key:0},D={class:"fs-3 fw-bold"},N={class:"mt-4"},j={class:"text-secondary-300"},M=s("i",{class:"fa-solid fa-user me-1"},null,-1),H={class:"text-secondary-300 ms-3"},O=s("i",{class:"fa-solid fa-calendar-days me-1"},null,-1),C=s("i",{class:"fa-solid fa-tag me-1"},null,-1),K={key:0},U=["src","srcset"],F=["innerHTML"],q=s("hr",null,null,-1),X={class:"row justify-content-between"},z={class:"col-6"},G=s("i",{class:"fa-solid fa-arrow-left me-2"},null,-1),J=s("br",null,null,-1),Q={key:0,class:"col-6"},W={class:"text-end"},Y=s("br",null,null,-1),Z=s("i",{class:"fa-solid fa-arrow-right ms-2"},null,-1),$={key:1,class:"vl-parent"},ss={class:"col-md-4"},es={class:"ps-lg-20 pt-lg-10 d-flex flex-column align-items-center align-items-md-start d-none d-md-block"},ts=s("h2",{class:"fs-5 fw-bold mt-10 mt-md-0"},"標籤",-1),ls={class:"mt-4"},is=s("i",{class:"fa-solid fa-tag"},null,-1),os=s("h2",{class:"fs-5 fw-bold mt-10"},"隨機文章",-1),as=L('<ul class="mt-10 row"><li class="col-3"><a href="https://podcasts.apple.com/tw/podcast/dr-meme/id1522408497" target="_blank"><i class="fa-solid fa-podcast fs-2"></i></a></li><li class="col-3"><a href="https://open.spotify.com/show/4gm4BSePy7Xoi08Nd8KH87" target="_blank"><i class="fa-brands fa-spotify fs-2"></i></a></li><li class="col-3"><a href="https://www.instagram.com/doctormeme_tw/" target="_blank"><i class="fa-brands fa-instagram fs-2"></i></a></li><li class="col-3"><a href="https://www.instagram.com/memedical_slashie/" target="_blank"><i class="fa-brands fa-instagram fs-2"></i></a></li></ul>',1);function cs(e, l, n, d, t, w){const _=p("RouterLink"),y=p("VueLoading");return i(),a("div",T,[s("div",R,[s("div",S,[t.isLoading?(i(),a("div",$,[g(y,{active:t.isLoading,"onUpdate:active":l[0]||(l[0]= o=>t.isLoading=o),"can-cancel":!1,"is-full-page":t.fullPage},null,8,["active","is-full-page"])])):(i(),a("div",B,[s("h1",D,r(t.article.title),1),s("div",N,[s("span",j,[M,c(r(t.article.author),1)]),s("span",H,[O,c(r(e.getDate(t.article.create_at)),1)]),(i(!0),a(m,null,h(t.article.tag, o=>(i(),a("span",{class:"text-secondary-300 ms-3",key:o},[C,c(r(o),1)]))),128))]),t.article.image&&Object.keys(t.article.image).length>0?(i(),a("div",K,[s("img",{class:"mt-4 w-100 rounded-3",src:t.article.image["1000w"],alt:"首圖",srcset:`${t.article.image["300w"]} 300w, ${t.article.image["600w"]} 600w, ${t.article.image["1000w"]} 1000w`},null,8,U)])):u("",!0),s("div",{class:"mt-4 p-6",innerHTML:t.article.content},null,8,F),q,s("div",X,[s("div",z,[e.storedAllArticles[t.currentIndex-1]?(i(),I(_,{key:0,to:`/article/${e.storedAllArticles[t.currentIndex-1].id}`,class:"d-flex align-items-center"},{default:f(()=>[G,s("div",null,[c(" 上一篇："),J,c(" "+r(e.storedAllArticles[t.currentIndex-1].title),1)])]),_:1},8,["to"])):u("",!0)]),e.storedAllArticles[t.currentIndex+1]?(i(),a("div",Q,[g(_,{to:`/article/${e.storedAllArticles[t.currentIndex+1].id}`,class:"d-flex align-items-center justify-content-end"},{default:f(()=>[s("div",W,[c(" 下一篇："),Y,c(" "+r(e.storedAllArticles[t.currentIndex+1].title),1)]),Z]),_:1},8,["to"])])):u("",!0)])]))]),s("div",ss,[s("div",es,[ts,s("div",ls,[(i(!0),a(m,null,h(w.allTags, o=>(i(),a("a",{class:"text-secondary-700 me-3",key:o},[is,c(r(o),1)]))),128))]),os,(i(!0),a(m,null,h(t.randomArticles, o=>(i(),a("div",{key:o.id,class:"mt-2"},[g(_,{to:`/article/${o.id}`,class:"fw-bold"},{default:f(()=>[c(r(o.title),1)]),_:2},1032,["to"])]))),128)),as])])])])}const _s=x(P,[["render",cs]]);export{_s as default};
